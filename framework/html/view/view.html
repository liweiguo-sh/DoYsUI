<!DOCTYPE html>
<html>
<head>
    <title>通用视图窗口</title>
    <script src="../../core/boot.js"></script>
    <script>
        importFrameworkRes("main-view-bar");
        importFrameworkRes("main-view");
    </script>

    <style type="text/css">
        #mview {
            --padding: 0px;
            --background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div id="app">
        <main-view id="mview" ref="mview" :attrs="viewProps"></main-view>
    </div>
</body>
</html>

<!-- winLoad -->
<script>
    var view = new Vue({
        el: '#app',
        data: {
            mviewHeight: 500,
            flag: true,
            viewProps: {

            }
        },
        mounted() {
            //this.abc();
        },
        methods: {
            abc() {
                if (this.flag) {
                    gId("mview").style.height = "800px";
                }
                else {
                    gId("mview").style.height = "500px";
                }
                this.flag = !this.flag;
            }
        }
    });

    // ------------------------------------------------------------------------
    function winLoad() {
        let height = win.p.maxHeight + topWin.cWin.titleHeight;     // -- 无标题窗口，需要加上标题高度才是可用区域的真实高度 --
        gId("mview").style.height = height + "px";
        
        let para = {
            viewPk: win.para.viewPk,  
            controller: win.para.controller,
            flowPks: win.para.flowPks,
            vfUrl: win.para.vfUrl,
            vfWindowState: win.para.vfWindowState
        }
        view.$refs.mview.init(para);
    }
</script>