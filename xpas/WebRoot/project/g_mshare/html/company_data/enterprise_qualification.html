<!DOCTYPE html>
<html>

<head>
    <title>企业资质</title>
    <script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>

    <script src="../../../../res/control/tree/xwf.tree.js" type="text/javascript"></script>
    <script src="../../../../res/control/grid/xwf.grid.js" type="text/javascript"></script>
    <script src="../../../../res/control/grid/xwf.gridview.js" type="text/javascript"></script>

    <script src="../../../../res/jscript/xwf.css.js" type="text/javascript"></script>
    <style type="text/css">
        body {
            overflow: hidden;
        }
        
        #tbLayout {
            border-collapse: collapse;
        }
        
        .tdLayout {
            padding: 0px;
            overflow: hidden;
            vertical-align: top;
        }
        
        .xwf_gridview_divToolbar {
            border: solid 1px #c0c0c0;
            border-bottom: solid 0 transparent;
        }
        
        .tdLayoutRight .xwf_toolbar_tdLayout {
            padding-left: 10px;
        }
    </style>
</head>

<body scroll="no">
    <table id="tbLayout">
        <tr>
            <td id="tdLayoutRight" class="tdLayout tdLayoutRight">
                <div id="divGrid"></div>
            </td>
        </tr>
    </table>
</body>

</html>

<!-- formLoad -->
<script type="text/javascript">
    var tbLayout = gId("tbLayout");
    var divGrid = gId("divGrid");

    var tree = null;
    var gridView = null;

    var categoryType = urlPara["category_type"];
    // ------------------------------------------------------------------------
    function formLoad() {
        win.addEventListener("beforeClose", beforeClose);

        divGrid.style.width = (win.p.width - 2 * tbLayout.offsetLeft) + "px";
        divGrid.style.height = (win.p.height - 2 * tbLayout.offsetTop - divGrid.offsetTop) + "px";

        if (gridView == null) {
            var prop = {
                divContainer: divGrid,
                toolbarVisible: true,
                viewKey: "enterprise_qualification",
                viewForm: "project/g_mshare/html/company_data/enterprise_qualification_add.html",
                //vfWindowState: "maximized",
                viewFilter: "1 = 1",
                jsonToolbar: {
                    height: "M",
                    onclick: onToolbarClick
                }
            };
            gridView = new window.xwf_gridview(prop);
            gridView.beforeAddnew = function() {
                // if (!tree.selectedNode || tree.selectedNode.quickType) {
                //     showErr("请先选择资质适用的 品类节点 或 耗材节点。");
                //     return false;
                // }
                return true;
            }

            gridView.toolbar.addBar({
                type: "button",
                key: "addnew",
                text: "<i class='fa fa-plus'></i>  添加",
                style: "Grid"
            });
            // gridView.toolbar.addBar({ type: "button", key: "imgCC", text: "<i class='fa fa-question'></i>", align: "right", style: "Grid", width: 32 });
            gridView.toolbar.addBar({
                type: "button",
                key: "close",
                text: "<i class='fa fa-close'></i>  关闭",
                align: "left",
                style: "Grid",
                icon: null
            });
            // gridView.toolbar.addBar({ type: "button", key: "filter", text: "<i class='fa fa-filter'></i>", align: "right", style: "Grid", icon: null, width: 35 });
            // gridView.toolbar.addBar({ type: "button", key: "export", text: "<i class='fa fa-share'></i>", align: "right", style: "Grid", icon: null, width: 35 });
        }
    }

    function beforeClose() {
        return true;
    }
</script>
<!-- 加载分类 -->
<script type="text/javascript">
    function onToolbarClick(para) {
        // ------------------------------------------------
        if (para.key.equals("addnew")) {
            gridView.addnew();
        } else if (para.key.equals("imgCC")) {
            var prop = {
                text: "资质分类说明",
                url: g.appPath + "project/xpas/html/util/picture.html"
            };
            var para = {
                urlImage: g.appPath + "project/g_mshare/images/diagram/diagram_cc.png"
            };
            topWin.openFullWindow(prop, para);
        } else if (para.key.equals("close")) {
            win.close();
        } else {
            showErr("unknown button " + para.key);
        }
    }
</script>