<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<head>
    <title id="title">产品资质维护</title>
	<script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.datatable.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/excel.js" type="text/javascript"></script>
    <script src="../../../../res/control/toolbar/xwf.toolbar.js" type="text/javascript"></script>
	<script src="../../../../res/control/uvform/xwf.uvform.js" type="text/javascript"></script>
	<script src="../../../../res/control/grid/xwf.grid.js" type="text/javascript"></script>
	<script src="../../../../res/control/grid/xwf.gridview.js" type="text/javascript"></script>

	<script src="../../../../res/jscript/xwf.css.js" type="text/javascript"></script>
</head>
<body>
	<div id="divDC"></div>
	<form id="frm" action="" target="g_mshare.base.certMaterial">
        <table id="tbForm" class="tbForm" style="width:800px;">
			<tr id="trH">
			    <th style="width:120px;"></th>
				<th style="width:200px"></th>
				<th style="width:120px;"></th>
				<th style="width:200px;"></th>
			</tr>
			<tr>				
	            <td>产品：</td>
	            <td class="td-field-content"><input type="text" class="input-field-content" style="width:100%" id="_gMatr_id"  controlType="dropdown" fieldValue="matr_id" fieldText="matr_name" fieldsVisible="matr_name" fieldsSearch="matr_name" /></td>
			</tr>
			<tr>				
				<td>产品资质名称：</td>
				<td><input type="text" id="_cCert_name" /></td>
				<td>资质代码：</td>
				<td><input type="text" id="_cCert_code" /></td>
			</tr>
			<tr>				
		        <td>创建日期：</td>
		        <td><input type="text" class="Wdate" id="_cCert_date" disabled="disabled" onfocus="WdatePicker()"/></td>
				<td>生效日期：</td>
				<td><input type="text" class="Wdate" id="_cCert_effective" onclick="WdatePicker()"/></td>
			</tr>
				<tr>				
		        <td>失效日期：</td>
				<td><input type="text" class="Wdate"  id="_cCert_exp" onclick="WdatePicker()"/></td>
				<td>当前版本：</td>
				<td><input type="text" id="_cCert_version" disabled="disabled"/></td>
			</tr>
            <tr>				
                <td>备注：</td>
				<td colspan="3"><textarea id="_cCert_remark" rows="4"></textarea></td>
			</tr>
		</table>
        <input type="hidden" id="_cCompany_id" />
        <input type="hidden" id="_cCert_category_id" />
        <input type="hidden" id="_cCert_id" />
        <input type="hidden" id="_ccert_status_ref" />
         <input type="hidden" id="_ccert_version" />
        
	</form>

</body>
</html>

<!-- formLoad -->
<script type="text/javascript">
     var node = null;
	//--------------------------------------
    function formLoad() {
	    vf.css(gId("tbForm"));
    }
    
    vf.beforeSave = function () {
    var matr_id =  gId("_gMatr_id").value;
       if(matr_id == null || "".equals(matr_id)){
        alert("请选择产品！");
         return false;
       }
      return true;
    }
    
    vf.afterMove = function () {
     node = win.parentWindow.gridView.tree.selectedNode;
     if (vf.status.equals("view")) {
     
	  }else{
      gId("_cCert_date").value = new Date();
      gId("_cCert_effective").value = new Date();
      gId("_cCert_version").value = 1;
     }
    }
    
       vf.beforeAddnew = function () {
        node = win.parentWindow.gridView.tree.selectedNode;
        if (node.value == null || "".equals(node.value)) {
            showErr("请选择资质类型！");
            return false;
        }
        return true;
    }
    
    	vf.afterAddnew = function () {
    	frm._cCert_category_id.value = node.value;
		frm._cCert_name.value = node.text;
	    }
</script>