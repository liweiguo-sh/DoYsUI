<!DOCTYPE html>
<html>

<head>
    <title>Forten供应商平台</title>
    <link rel="shortcut icon" href="images/transit.ico" type="image/x-icon" />

    <link href="../../../../../res/control/window/style2/xwf.window.css" rel="stylesheet" />

    <script src="../../../../../res_plugin/jquery/jquery-1.11.3.min.js"></script>
    <script src="../../../../../res_plugin/jquery/jquery_md5.js"></script>

    <script src="../../../../../res/jscript/xwf.js"></script>
    <script src="../../../../../res/jscript/xwf.ajax.js"></script>
    <script src="../../../../../res/jscript/xwf.const.js"></script>
    <script src="../../../../../res/control/window/xwf.window.js"></script>

    <script src="../../../../../res/jscript/xwf.login.js"></script>
    <!-- style 顶部-->
    <style type="text/css">
        body {
            background-color: #eef3f9;
            font-family: 微软雅黑;
            margin: 0px 0px 0px 0px;
            overflow: hidden;
        }
        
        #divLayout {
            border: solid 1px #eef3f9;
            background-color: White;
            width: 900px;
            margin-top: 0px;
            margin-left: auto;
            margin-right: auto;
            vertical-align: middle;
            padding: 0px 100px 0px 100px;
        }
        
        #divLogo {
            height: 128px;
            margin: 50px 0px 0px 25px;
            background: url('images/logo_hr.png');
            background-repeat: no-repeat;
            background-position: left center;
        }
        
        #divProjectName {
            --border: solid 1px blue;
            font-size: 16pt;
            font-weight: bold;
            text-align: center;
            margin: 0px 0px 10px 0px;
        }
        
        #divLine1 {
            height: 20px;
            margin: 10px 0px 10px 0px;
            background: url('images/login_line1.png');
            background-repeat: no-repeat;
            background-position: center center;
        }
    </style>
    <!-- style 底部-->
    <style type="text/css">
        #divBottom {
            font-size: 10pt;
            text-align: center;
            margin: 50px 0px 50px 0px;
        }
    </style>

    <!-- style 中部-->
    <style type="text/css">
        #tbMiddle {
            width: 900px;
            table-layout: fixed;
            border-collapse: collapse;
        }
        
        #tbMiddle td {
            --border: solid 1px blue;
            padding: 0px;
            overflow: hidden;
        }
        
        #tdMiddle {
            background: url('images/login_line2.png');
            background-repeat: no-repeat;
            background-position: center center;
        }
    </style>
    <!-- style 中左-->
    <style type="text/css">
        .divLabelA {
            margin: 15px 0px 5px 25px;
        }
        
        .divInputA {
            width: 260px;
            height: 45px;
            margin: 5px 0px 25px 25px;
            padding: 0px 0px 0px 60px;
            background-position: left center;
            background-repeat: no-repeat;
            background-size: 50px 50px;
            border-radius: 4px;
            border: solid 1px #446fa6;
        }
        
        #txtUserkey,
        #txtPassword {
            padding: 0px 5px 0px 10px;
            border: solid 0px red;
            line-height: 40px;
            height: 45px;
            width: 240px;
            font-size: 11pt;
        }
        
        .txtUserKey:focus,
        .txtPassword:focus {
            outline: none;
        }
        
        #tbCheckCode {
            margin: 15px 0px 5px 25px;
            width: 320px;
            table-layout: fixed;
            border-collapse: collapse;
        }
        
        #tbCheckCode td {
            padding: 0px;
            border: solid 0px red;
            height: 30px;
        }
        
        #txtCheckCode {
            width: 80px;
            font-size: 12pt;
            border-top: solid 0px red;
            border-left: 0px;
            border-right: 0px;
            border-bottom: solid 1px Gray;
            height: 24px;
            line-height: 30px;
        }
        
        #txtCheckCode:focus {
            outline: none;
        }
        
        #imgCheckCode {
            width: 80px;
            height: 30px;
            border: solid 0px Gray;
        }
        
        #aForgot {
            margin-left: 22px;
            font-size: 9pt;
            text-decoration: none;
        }
        
        #chkRemember {
            float: left;
            width: 18px;
            height: 18px;
            margin: 0;
            margin-top: 3px;
            margin-right: 10px;
        }
        
        #btnLogin {
            font-size: 12pt;
            line-height: 36px;
            background-color: White;
            text-decoration: none;
            color: Blue;
            cursor: pointer;
            border: 0px;
        }
        
        #btnLogin:hover {
            color: Navy;
        }
    </style>
    <!-- style 中右-->
    <style type="text/css">
        #ulList li {
            height: 35px;
        }
        
        A:link {
            color: #446fa6;
        }
        
        a:visited {
            color: #446fa6;
        }
        
        a:hover {
            color: Red;
        }
        
        #tbApp {
            width: 384px;
            table-layout: fixed;
            border-collapse: collapse;
        }
        
        #tbApp td {
            padding: 0px;
            text-align: center;
        }
    </style>
</head>

<body onload="formLoad();">
    <div id="divLayout">
        <div id="divLogo"></div>
        <div id="divProjectName">供应商平台</div>
        <div id="divLine1"></div>
        <table id="tbMiddle">
            <tr>
                <td style="width: 425px;">
                    <div class="divLabelA">用户名称</div>
                    <div class="divInputA" style="background-image: url('images/userkey.png');">
                        <input type="text" class="txtUserKey" id="txtUserkey" value="" />
                    </div>
                    <div class="divLabelA">登录密码</div>
                    <div class="divInputA" style="background-image: url('images/password.png');">
                        <input type="password" class="txtPassword" id="txtPassword" value="" />
                    </div>
                    <table id="tbCheckCode">
                        <tr>
                            <td style="width: 150px;">
                                <input type="checkbox" id="chkRemember" /><label id="lblRemember" for="chkRemember">记住密码</label></td>
                            <td style="width: 90px;">
                                <input type="text" id="txtCheckCode" /></td>
                            <td style="width: 80px;">
                                <img id="imgCheckCode" src="" alt="" title="看不清楚，点击更换" onclick="getCheckCode();" /></td>
                        </tr>
                        <tr>
                            <td style="vertical-align: top;">
                                <a id="aForgot" href="#" onclick="retrievePassword();" style="display: none;">忘记密码</a>
                            </td>
                            <td colspan="2" style="text-align: right; vertical-align: bottom; height: 50px;">
                                <input type="button" id="btnLogin" value="> 登录系统 <" onclick="btnLogin_click();" />
                            </td>
                        </tr>
                    </table>
                </td>
                <td id="tdMiddle" style="width: 50px;"></td>
                <td style="width: 425px; vertical-align: top;">
                    <div style="padding: 15px 0px 0px 0px;">使用帮助</div>
                    <ul id="ulList">
                        <li><a href="res_file/init.zip" title="初次使用本系统时，请下载本文件，解压后双击执行，完成IE浏览器初始化配置" target="_blank">IE初始化文件</a></li>
                        <li><a href="../../../../../res/res_file/谷歌浏览器-便捷版.zip" title="仅限xp以上系统使用">谷歌浏览器(便捷版)</a></li>
                    </ul>
                    <table id="tbApp" style="table-layout: fixed; border-collapse: collapse; display: none;">
                        <tr>
                            <td>
                                <img id="imgAppAndroid" style="width: 128px; height: auto;" src="#" alt="" /></td>
                            <td></td>
                            <td>
                                <img id="imgAppLogin" style="width: 128px; height: auto;" src="#" alt="" /></td>
                        </tr>
                        <tr>
                            <td>安卓App下载</td>
                            <td></td>
                            <td>App扫码登录</td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <div id="divBottom">Copyright © 2017-2019 @xpas-next.com</div>
    </div>
</body>

</html>

<!-- formLoad & login -->
<script type="text/javascript">
    var txtUserkey = gId("txtUserkey");
    var txtPassword = gId("txtPassword");

    function formLoad() {
        formResize();
        initLogin({
            urlMainDefault: g.appPath + "main3.html",
            loginPath: "bjtt"
        });

        createAppBarcode();
    }

    function formResize() {
        var allHeight = window.screen.availHeight;
        var userHeight = gId("divLayout").offsetHeight;
        var topMargin = 0.25 * (allHeight - userHeight);

        gId("divLayout").style.marginTop = (topMargin > 15 ? topMargin : 15) + "px";
    }
    //-------------------------------------------------------------------------
    function btnLogin_click() {
        loginSystem();
    }

    function changePassword() {
        var cWin = new window.xwf_window({});
        var winChangePW = cWin.openWindow({
            noTitle: true,
            windowState: 'maximized',
            url: "../../../../xpas/html/organization/changePassword_new.html"
        }, {
            invoker: "login",
            userKey: txtUserkey.value,
            txtPW: txtPassword.value
        });
    }

    function retrievePassword() {
        var cWin = new window.xwf_window({});
        var winRetrievePW = cWin.openWindow({
            noTitle: true,
            modal: true,
            windowState: "maximized",
            url: "../../../project/xpas/html/account/retrieve_password.html"
        }, {
            invoker: "login"
        });
    }
</script>

<!-- app barcode -->
<script type="text/javascript">
    function createAppBarcode() {
        var xpasPath = g.httpServer + g.appPath;
        var imgAndroidApp = gId("imgAndroidApp");
        // ------------------------------------------------
        if (g.httpServer.indexOf("127.0.0.1") >= 0 || g.httpServer.indexOf("localhost") >= 0) {
            gId("imgAppAndroid").src = "#";
            gId("imgAppLogin").src = "#";
            return;
        }

        if (g.a.send("processType=g_mscm.anonymous.AppBarcode&actionType=createAppBarcode", {
                xpasPath: xpasPath
            }, true)) {
            if (g.a.OK) {
                var cReturn = g.a.cReturn;
                var urlAppAndroid = cReturn.urlAppAndroid;
                var urlAppLogin = cReturn.urlAppLogin;

                gId("imgAppAndroid").src = g.runPath + "g_mscm/app/" + urlAppAndroid;
                gId("imgAppLogin").src = g.runPath + "g_mscm/app/" + urlAppLogin;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }
</script>