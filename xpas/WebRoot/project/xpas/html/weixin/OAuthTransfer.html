<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>网页授权跳转代理页面</title>
	<script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>
</head>
<body onload="formLoad();">	
	<div id="divMsg" style="font-size:48px"></div>
</body>
</html>

<script type="text/javascript">
	var urlPara = getUrlPara();
	var divMsg = gId("divMsg");
	// ------------------------------------------------------------------------
	function formLoad() {
		var redirectUrl = urlPara["transfer_url"];
		if (redirectUrl == null) {
			showParameter();
			divMsg.innerHTML += "<hr />缺少参数：transfer_url，无法跳转。";
			return;
		}
		else {
			//showParameter();
		}
		
		var urlTo = redirectUrl + "?redirectFrom=OAuthTransfer.html";
		for (var key in urlPara) {
			if (!key.equals("transfer_url")) {
				urlTo += "&" + key + " = " + urlPara[key];
			}
		}
		window.location = urlTo;
	}

	function showParameter() {
		var arrPara = new Array();
		for (var key in urlPara) {
			arrPara.push(key + " = " + decodeURIComponent(urlPara[key]));
		}
		divMsg.innerHTML = "回调网页参数(xPas)：<hr>" + arrPara.join("<br />");
	}
</script>
