<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>视图扩展功能编辑窗口</title>
	<script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>	
	<script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>

	<script src="../../../../res/control/uvform/xwf.uvform.js" type="text/javascript"></script>

	<script src="../../../../res/jscript/xwf.css.js" type="text/javascript"></script>
</head>
<body>
	<div id="divDC"></div>
	<form id="frm" action="" target="">
		<table id="tbForm" class="tbForm" style="width:705px;">
			<tr class="trH">
				<th style="width:150px;"></th>
				<th style="width:200px;"></th>
				<th style="width:150px;"></th>
				<th style="width:200px;"></th>
			</tr>
			<tr>				
				<td>扩展功能标识：</td>
				<td><input type="text" id="_cView_Extra_Key" value="" /></td>
				<td>扩展功能名称：</td>
				<td><input type="text" id="_cView_Extra_Text" value="" /></td>
			</tr>
			<tr>				
				<td>类型：</td>
				<td><input id="_cView_Extra_Type" type="text" controlType="dropdown" fieldValue="a" fieldText="b" dataSource="[['a','b'],[1,'功能列按钮'],[2,'网格列按钮']]" visibleSearch="false" /></td>
				<td>禁用标志：</td>
				<td><input type="checkbox" id="_cView_Extra_Inactive" /><label for="_cView_Extra_Inactive">禁用</label></td>					
			</tr>
			<tr>				
				<td>特定菜单：</td>
				<td><input type="text" id="_cMenu_Key" value="" /></td>
				<td>宽度：</td>
				<td><input type="text" id="_cView_Extra_Width" value="" /></td>
			</tr>
			<tr>				
				<td>序号：</td>
				<td><input type="text" id="_cView_Extra_Order" value="" /></td>
				<td></td>
				<td></td>
			</tr>
			<tr>				
				<td>URL：</td>
				<td colspan="3"><input type="text" id="_cView_Extra_Form_Url" value="" /></td>
			</tr>
			<tr>
				<td>备注：</td>
				<td colspan="3"><textarea id="_cView_extra_remark" rows="3" cols="0"></textarea></td>
			</tr>
		</table>
		<input id="_cView_Key" type="hidden" value="" />
	</form>
</body>
</html>

<!-- formLoad -->
<script type="text/javascript">
	var frmParent = null;
	// ------------------------------------------------------------------------
	function formLoad() {
		frmParent = win.parentWindow.frm;
		vf.css(gId("tbForm"));
	}
</script>

<!-- vf.events -->
<script type="text/javascript">
	vf.beforeSave = function () {
		// -- xTFS：判断是否已签出 ------------------------
		if (g.a.send("processType=com.xtfs.XtfsCore&actionType=getMDataStatus", { mdataType: "view", mdataKey: frm._cView_Key.value }, true)) {
			if (g.a.OK) {
				var cReturn = g.a.cReturn;
				if (!cReturn.newMData && !cReturn.myCheckout) {
					showWarn("主数据尚未签出，同步xTFS时修改会丢失，请谨慎操作。");
				}
			}
		}
		// ------------------------------------------------
		return true;
	}

	vf.afterAddnew = function () {
		frm._cMenu_Key.value = "*";
		frm._cView_Extra_Type.setValue(1);
		frm._cView_Extra_Width.value = "0";
		frm._cView_Extra_Order.value = "99";
		frm._cView_Key.value = frmParent._cVIEW_KEY.value;
	}
</script>