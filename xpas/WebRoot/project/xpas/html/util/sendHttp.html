<!DOCTYPE html />
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Web接口测试</title>
	<link href="../../../../res_plugin/bootstrap4.0/my_bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<script src="../../../../res_plugin/bootstrap4.0/my_bootstrap/jquery-3.2.1.slim.min.js" type="text/javascript"></script>
	<script src="../../../../res_plugin/bootstrap4.0/my_bootstrap/popper.min.js" type="text/javascript"></script>
	<script src="../../../../res_plugin/bootstrap4.0/my_bootstrap/bootstrap.min.js" type="text/javascript"></script>
	
	<script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
	<script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>	
	<script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>
</head>
<body>
	<div class="container-fluid" style="width:1200px;">
		<h1>&nbsp;</h1>
		<h4>WEB接口测试</h4> 
		<div class="card card-primary">
			<div class="card-header bg-primary text-white">测试区</div>
			<div class="card-body">
				<div class="row" id="divRow1">
					<div class="col-sm-7">
						<label for="txtPattern">url (http | https)</label>
                        <textarea class="form-control" id="txtUrl" rows="2" placeholder="请输入接口地址"></textarea>
						<br />
						<label for="txtString">post data string</label>
                        <textarea class="form-control" id="txtPostData" rows="6" placeholder="请输入接口数据"></textarea>
						<br />
						<div class="col-sm-12 text-center">						
							<a href="#" id="btnTest" class="btn btn-primary" style="width:30%;" onclick="btnSend_click();">测试</a>							
						</div>
					</div>
					<div class="col-sm-5">
						<div id="divResult" class="jumbotron alert-secondary" style="margin-top:15px;padding-top:15px;">
							备注：
							<ul>
								<li>urlHttp可以是https，典型示例：</li>
								<li>url：<br/>http://127.0.0.1:7000/xpas/wis.do?interfaceName=com.Framework.ws.HttpWebInterfaceTest&actionType=getWebData1</li>
                                <li>post data：<br/>{name:王老吉,age:24,post:[{zip:200002,address:南京东路1234号},{zip:250011,address:大明湖畔清风亭}]}</li>
							</ul>
						</div>
					</div>
                    <div class="col-sm-12">
                        <label for="txtPattern">web api return result</label>
                        <textarea class="form-control" id="txtResult" rows="12"></textarea>
                    </div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>

<!-- formLoad -->
<script type="text/javascript">
    var txtUrl = gId("txtUrl");
    var txtPostData = gId("txtPostData");
    var txtResult = gId("txtResult");
    // ------------------------------------------------------------------------
    function formLoad() {
        init();
    }
</script>
<!-- 页面控件处理 -->
<script type="text/javascript">
    function init() {
        txtUrl.value = "http://127.0.0.1:7000/xpas/wis.do?interfaceName=com.Framework.ws.HttpWebInterfaceTest&actionType=getWebData1";
        txtPostData.value = "{name:王老吉,age:24,post:[{zip:200002,address:南京东路1234号},{zip:250011,address:大明湖畔清风亭}]}";
        txtResult.value = "";
    }

    function btnSend_click() {
        sendHttp();
    }
</script>

<!-- RegExp.test() -->
<script type="text/javascript">
    function sendHttp() {
        var urlHttp = txtUrl.value.trim();
        var postData = txtPostData.value.trim();
        // ------------------------------------------------
        txtResult.value = "";
        if (g.a.send("processType=com.Framework.net.HttpJsonTest&actionType=sendHttp1", { urlHttp: urlHttp, postData: postData }, true)) {
            if (g.a.OK) {
                var cReturn = g.a.cReturn;
                var result = cReturn.result;

                txtResult.value = result;
            }
            else {
                return false;
            }
        }
        else {
            return false;
        }
    }
</script>