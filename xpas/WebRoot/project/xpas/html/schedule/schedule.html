<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>后台定时计划</title>
    <!--<link href="../../../../res/control/uvform/style2/xwf.uvform.css" rel="stylesheet" type="text/css" />-->

    <link href="../../../../res_plugin/bootstrap4.0/my_bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../../../../res_plugin/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../../../../res/control/toolbar/style2/xwf.toolbar.css" rel="stylesheet" />

    <script src="../../../../res_plugin/bootstrap4.0/my_bootstrap/jquery-3.2.1.slim.min.js" type="text/javascript"></script>
    <script src="../../../../res_plugin/bootstrap4.0/my_bootstrap/popper.min.js" type="text/javascript"></script>
    <script src="../../../../res_plugin/bootstrap4.0/my_bootstrap/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../../../res_plugin/jquery/jquery_md5.js" type="text/javascript"></script>

    <script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.datatable.js" type="text/javascript"></script>

    <script src="../../../../res/control/toolbar/xwf.toolbar.js"></script>
    <script src="../../../../res/control/uvform/xwf.uvform.js" type="text/javascript"></script>
</head>
<body>
    <div class="container-fluid" style="width:900px;margin-top:10px;height:610px;overflow:hidden">
        <div class="card card-primary">
            <div id="divDC" style="margin:10px 0px 0px 10px;"></div>
            <form id="frm" action="" target="com.system.schedule.Schedule">
                <div class="card-body">
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">计划标识</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cSCHEDULE_KEY" class="form-control" placeholder="主键" />
                        </div>
                        <label class="col-sm-2 col-form-label">后台类</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cSchedule_task" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">计划名称</label>
                        <div class="col-sm-10">
                            <input type="text" id="_cSchedule_name" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">轮询间隔</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cInterval" class="form-control" />
                        </div>
                        <label class="col-sm-2 col-form-label">间隔单位</label>
                        <div class="col-sm-4">
                            <select class="form-control" id="_cInterval_unit">
                                <option value="Y">年</option>
                                <option value="M">月</option>
                                <option value="D">日</option>
                                <option value="H">小时</option>
                                <option value="MI">分钟</option>
                                <option value="S">秒</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">起始时间</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cStart_time" class="form-control" />
                        </div>
                        <label class="col-sm-2 col-form-label">截止时间</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cEnd_time" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">末次执行状态</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cLast_status" class="form-control" />
                        </div>
                        <label class="col-sm-2 col-form-label">末次执行时间</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cLast_time" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">末次执行描述</label>
                        <div class="col-sm-10">
                            <textarea class="form-control" id="_cLast_remark" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">计划执行顺序</label>
                        <div class="col-sm-4">
                            <input type="text" id="_cSchedule_order" class="form-control" />
                        </div>
                        <label class="col-sm-2 col-form-label">禁用</label>
                        <div class="col-sm-4">
                            <div class="form-check" style="margin-top:8px;margin-left:3px;">
                                <label class="form-check-label"><input type="checkbox" id="_cInactive" value="" class="form-check-input">&nbsp;禁用</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">备注</label>
                        <div class="col-sm-10">
                            <textarea class="form-control" id="_cSchedule_remark" rows="3"></textarea>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</body>
</html>

<!-- formLoad -->
<script type="text/javascript">
    var verifyType = "";
    // ------------------------------------------------------------------------
    function formLoad() {
        vf.addExtraButton({ key: "invokeTask", text: "执行一次" });
    }
</script>

<!-- vf.events -->
<script type="text/javascript">
    vf.beforeClick = function (prop) {
        var buttonKey = prop.buttonKey;
        if (buttonKey.equals("invokeTask")) {
            return true;
        }
        else {
            showErr("未知的扩展功能 [" + buttonKey + "], 请检查。");
        }
        return false;
    }
    vf.afterClick = function (prop) {
        var buttonKey = prop.buttonKey;
        if (buttonKey.equals("invokeTask")) {
        	alert(g.a.cReturn.msg?g.a.cReturn.msg:"后台任务调用执行完成，请查看后台日志是否有错误。");
            debug(g.a.cReturn.msg?g.a.cReturn.msg:"后台任务调用执行完成，请查看后台日志是否有错误。")
        }
        else {
            showErr("未知的扩展功能 [" + buttonKey + "], 请检查。");
        } 
    }
</script>