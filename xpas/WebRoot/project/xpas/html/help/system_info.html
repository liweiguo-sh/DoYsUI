<!DOCTYPE html>
<html>

<head>
    <title>系统信息查看</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="../../../../res/jscript/xwf.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.ajax.js" type="text/javascript"></script>
    <script src="../../../../res/jscript/xwf.const.js" type="text/javascript"></script>
	 <script src="../../../../res_plugin/zui-1.8.1-dist/lib/jquery/jquery.js" type="text/javascript"></script>
    <script src="../../../../res_plugin/zui-1.8.1-dist/js/zui.js"></script>
    <link rel="stylesheet" href="../../../../res_plugin/zui-1.8.1-dist/css/zui.min.css" />
   <script src="../../../../res_plugin/jquery/jquery-migrate-1.2.1.js" title="jQuery migrate插件解决迁移兼容问题"></script>
	<script src="../../../../res_plugin/jquery/jquery.jqprint-0.3.js" title="打印插件"></script>
</head>

<body>
    <div class="container-fluid with-padding" >
    	 <div class="row ">
    	 	<div class="col-xs-12 with-padding" >
	            <div class="btn-group">
				  <button type="button" class="btn btn-primary" onclick="print();" >打印</button>
				  <button type="button" class="btn" onclick="win.close();"  style="    margin-left: 3px;">关闭</button>
				</div>
    	 	</div>
        </div>
    	 <div class="row with-padding">
    	 	<div class="col-xs-1 " style="color: #fff;background-color: #f1a325;">
    	 		该信息比较重要
    	 	</div>
    	 	<div class="col-xs-11" >
    	 		需要检查
    	 	</div>
        </div>
    	 <div class="row with-padding">
    	 	<div class="col-xs-1 with-padding" style="color: #fff;background-color:#ea644a;">
    	 		该信息比较危险 
    	 	</div>
    	 	<div class="col-xs-11 with-padding" >
    	 		一定要保证正确，上线项目或者上线项目的数据库备份一定要检查没问题后再进行操作
    	 	</div>
        </div>
        <div class="row" >
        	<div class="col-xs-12 with-padding" >
        		<div class="table-responsive"> 
	        		<table class="table table-striped table-hover table-bordered table-condensed "  id="table">
					  <thead>
					    <tr>
					      <th   >类型</th>
					      <th  	>名称</th>
					      <th	>当前值</th>
					      <th	>描述</th>
					    </tr>
					  </thead>
					  <tbody id="tableBody">
					  	<tr>
					      <td colspan="3">未获取到相关信息</td>
					    </tr>
					  </tbody>
					</table>
        		</div>
        	</div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">

var tableBody;
function formLoad() {
	tableBody=$("#tableBody");
	 init();
}

//加载数据
function init() {
	  //查询配置模板
       var param={viewKey:""},jsonArr=[];
       if (g.a.send("processType=com.system.HelpView&actionType=getSystemInfo",param, true)) {
           if (g.a.OK) {
               var jsonarrstr = g.a.cReturn.jsonarr;
               if (jsonarrstr) {
            	   jsonArr = eval(jsonarrstr);
               }
           }
       }
			
       if(jsonArr.length > 0){
       	 var ob,tableBodyHtml=[],value;
       	 var importantCss="color: #fff;background-color: #f1a325;",dangerCss="color: #fff;background-color:#ea644a;",cssTd="";
       	 for(var i=0;i<jsonArr.length;i++){
       	 	ob=jsonArr[i];
       	 	cssTd="";
       	 	if("Environment.serverName".indexOf(ob.type) != -1){
       	 		cssTd=importantCss;
       	 	}
       	 	if("system.serverMAC,Environment.templetId,Environment.scheduleKeys,TG_LOCAL_SERVER.company_id,TG_LOCAL_SERVER.url_server_sp,TG_LOCAL_SERVER.userkey_md5".indexOf(ob.type) != -1){
       	 		cssTd=dangerCss;
       	 	}
       	 	tableBodyHtml.push(' <tr>');
       	 	tableBodyHtml.push(' <td  >'+ob.type+'</td>');
       	 	tableBodyHtml.push(' <td style="'+cssTd+'">'+ob.name+'</td>');
       	 	value=ob.value?ob.value:'无';
       	 	tableBodyHtml.push(' <td  >'+value+'</td>');
       	 	tableBodyHtml.push(' <td >'+ob.remark+'</td>');
       	 	tableBodyHtml.push(' </tr>');
       	 }
	      tableBody.html(tableBodyHtml.join(""));
       }
}
 
//print
function print() {
	  $("#table").jqprint({
           debug: false, //如果是true则可以显示iframe查看效果
           //（iframe默认高和宽都很小，可以再源码中调大），默认是false
           importCSS: true, //true表示引进原来的页面的css，默认是true。
           //（如果是true，先会找$("link[media=print]")，若没有会去找$("link")中的css文件）
           printContainer: true, //表示如果原来选择的对象必须被纳入打印
           //（注意：设置为false可能会打破你的CSS规则）。
           operaSupport: true //表示如果插件也必须支持歌opera浏览器，在这种情况下，
               //它提供了建立一个临时的打印选项卡。默认是true
       });
}
 
    
</script>