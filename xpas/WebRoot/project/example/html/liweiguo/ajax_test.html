<!DOCTYPE html>
<html>
<head>
    <title>Ajax测试页面</title>
</head>
<body onload="formLoad();">
	<div id="divButton" class="divButtons">
		<input type="button" id="btnTest" onclick="btnTest_click();" value="测试" />
        <input type="button" id="btnTest2" onclick="btnTest2_click();" value="集成测试" />
		<input type="button" id="btnClose" onclick="btnClose_click();" value="关闭" />
	</div>
	<div id="divResult" style="border:solid 1px Green;margin:10px;padding:10px;color:Red;"></div>	
</body>
</html>

<!-- formLoad -->
<script type="text/javascript">
    var urlServer = "http://127.0.0.1:7000/xpas/filter.do?processType=example.liweiguo.anonymous.AjaxAnonymous&actionType=actionTypeA";
    var urlPara = "&para1=para1&para2=" + encodeURIComponent("para2") + "&para3=" + encodeURIComponent("参数3");   // + "&para4=参数4";
    var url = urlServer + urlPara + "&rnd=" + Math.random();

    var divResult = document.getElementById("divResult");
	// ------------------------------------------------------------------------
	function formLoad() {
		btnTest_click();
	}
	function btnTest_click() {
		var xmlHttp;
		divResult.innerHTML = url + "<br />" + (new Date()).toString() + "<br /><br />"
		try {
			xmlHttp = new XMLHttpRequest();
			xmlHttp.overrideMimeType('text/xml');

			xmlHttp.open("POST", url, false);
			xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xmlHttp.send("paraA=parameterA&paraB=" + encodeURIComponent("parameterB") + "&paraC=" + encodeURIComponent("中文3") + "&paraD=中文4");

			if (xmlHttp.status != 200) {
				alert(xmlHttp.statusText + "  -  " + xmlHttp.status + "\n\n" + xmlHttp.responseText);
				return false;
			}
			divResult.innerHTML += xmlHttp.responseText;
		}
		catch (e) {
			divResult.innerHTML += e.toString();
		}
	}
</script>

<script type="text/javascript">
    function btnTest2_click() {

    }
</script>