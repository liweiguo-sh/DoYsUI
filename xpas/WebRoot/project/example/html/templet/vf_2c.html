<!DOCTYPE html>
<html>
<head>
    <title>示例界面</title>
	<script src="../../../../res/jscript/xwf.js"></script>
	<script src="../../../../res/jscript/xwf.ajax.js"></script>	
	<script src="../../../../res/jscript/xwf.const.js"></script> 
		
	<script src="../../../../res/control/grid/xwf.grid.js"></script>
	<script src="../../../../res/control/grid/xwf.gridview.js"></script>
	<script src="../../../../res/control/uvform/xwf.uvform.js"></script>

	<script src="../../../../res/jscript/xwf.css.js"></script>
</head>
<body>
	<div id="divDC"></div>
    <div class="PanelA">
	    <form id="frm" action="" target=""> 
		    <table id="tbForm" class="tbForm" style="width:760px;">
			    <tr class="trH">
				    <th style="width:15%;"></th>
				    <th style="width:35%;"></th>
				    <th style="width:15%;"></th>
				    <th style="width:35%;"></th>
			    </tr>
			    <tr>				
				    <td>单号</td>
				    <td><input type="text" id="_cSerialNO" /></td>
				    <td>日期</td>
				    <td><input type="text" id="_cDate" class="Wdate" onclick="WdatePicker({ dateFmt: 'yyyy-MM-dd' })" /></td>
			    </tr>
			    <tr>				
				    <td>名称</td>
				    <td colspan="3"><input type="text" id="_cName" /></td>
			    </tr>
			    <tr>				
				    <td>类别1</td>
				    <td><input id="_cType1_ID" type="text" controlType="dropdown" fieldValue="b" fieldText="a" dataSource="[['a','b'],['',0],['平邮',1],['送货上门',2],['自提',3]]" visibleSearch="false" /></td>
				    <td>类别2</td>
                    <td><input id="_cType2_ID" type="text" controlType="dropdown" fieldValue="field_value" fieldText="field_text" fieldsSearch="field_value,field_text" visibleSearch="false" /></td>
			    </tr>
			    <tr>
				    <td>备注</td>
				    <td colspan="3"><textarea id="_cCallback_remark" rows="3" cols="0"></textarea></td>
			    </tr>
		    </table>		
		    <input id="_cID" type="hidden" />
	    </form>
        <div id="divGrid"></div>
    </div>
</body>
</html>

<!-- formLoad -->
<script>     
    var divGrid = gId("divGrid");

    var gridview = null;
    // ------------------------------------------------------------------------
    function formLoad() {
        var frmParent = win.parentWindow.frm;
        var node = frmParent.gridView.tree.selectedNode;
        var navAStatus = (node.level > 1 ? node.value : 0);

        vf.css(gId("tbForm"));
        vf.addExtraButton({ key: "printWi", text: "打印入库单" });
    }
</script>

<!-- vf.events -->
<script>
    vf.afterAddnew = function () {
        frm._cDate.value = (new Date).toString();
    }

    vf.afterMove = function () {
        var foreignKeyId = frm._cID.value.toInt();
        if (gridview == null) {
            var prop = {
                divContainer: divGrid,
                viewKey: "viewKey",
                viewFilter: "foreign_key_id = " + foreignKeyId,
                viewForm: "project/project_name/html/module_name/edit_form.html"
            };
            gridview = new window.xwf_gridview(prop);
        }
        else {
            gridview.setViewFilter("foreign_key_id = " + foreignKeyId);
        }
    }	
</script>