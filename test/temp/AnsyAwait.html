<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <input type="button" onclick="test1()" value="foo" />
    <input type="button" onclick="test2()" value="bar" />
</body>
</html>

<script>
    let i = 0;

    function test1() {
        foo();

        console.log("begin");
    }

    async function foo() { 
        while(true) {
            await sleep(3000);
            console.log(i++);
            if (i > 3) break;
        }
    }
    function sleep(time) {
        return new Promise((resolve) => setTimeout(resolve, time));
    }

    function test2() {
        console.log((new Date()).toLocaleTimeString());
    }
</script>